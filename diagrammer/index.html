<!DOCTYPE html><html><head><title>Chisel/FIRRTL: Diagrammer</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="the Chisel/FIRRTL Developers" /><meta name="description" content="Chisel/FIRRTL
Hardware Compiler Framework" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="Chisel/FIRRTL: Diagrammer" /><meta name="title" property="og:title" content="Chisel/FIRRTL: Diagrammer" /><meta name="og:site_name" content="Chisel/FIRRTL" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="Chisel/FIRRTL
Hardware Compiler Framework" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="Chisel/FIRRTL: Diagrammer" /><meta name="twitter:image" content="https://www.chisel-lang.org/img/poster.png" /><meta name="twitter:description" content="Chisel/FIRRTL
Hardware Compiler Framework" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@chisel_lang" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/vs.css" /><link rel="stylesheet" href="/css/pattern-style.css" /><script async="async">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-145179088-1' , 'auto');
ga('send', 'pageview');
      </script></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"><span>Chisel/FIRRTL</span></div></a></li>                  <li><a href="/diagrammer" class=" active ">Diagrammer</a></li> <li><a href="/api/diagrammer/latest/" class="">API Documentation</a> <ul class="sub-section"> <li><a href="/api/diagrammer/SNAPSHOT/" class="">SNAPSHOT</a></li> <li><a href="/api/diagrammer/1.3.2/" class="">1.3.2</a></li> <li><a href="/api/diagrammer/1.3.1/" class="">1.3.1</a></li> <li><a href="/api/diagrammer/1.3.0/" class="">1.3.0</a></li> <li><a href="/api/diagrammer/1.2.3/" class="">1.2.3</a></li> <li><a href="/api/diagrammer/1.2.2/" class="">1.2.2</a></li> <li><a href="/api/diagrammer/1.2.1/" class="">1.2.1</a></li> <li><a href="/api/diagrammer/1.2.0/" class="">1.2.0</a></li> <li><a href="/api/diagrammer/1.1.8/" class="">1.1.8</a></li> <li><a href="/api/diagrammer/1.1.7/" class="">1.1.7</a></li> <li><a href="/api/diagrammer/1.1.6/" class="">1.1.6</a></li> <li><a href="/api/diagrammer/1.1.5/" class="">1.1.5</a></li> <li><a href="/api/diagrammer/1.1.4/" class="">1.1.4</a></li> <li><a href="/api/diagrammer/1.1.3/" class="">1.1.3</a></li> <li><a href="/api/diagrammer/1.1.2/" class="">1.1.2</a></li> <li><a href="/api/diagrammer/1.1.1/" class="">1.1.1</a></li> <li><a href="/api/diagrammer/1.1.0/" class="">1.1.0</a></li> <li><a href="/api/diagrammer/1.0.2/" class="">1.0.2</a></li> <li><a href="/api/diagrammer/1.0.1/" class="">1.0.1</a></li> <li><a href="/api/diagrammer/1.0.0/" class="">1.0.0</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav hidden-xs hidden-sm"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li></ul></div></div></div></div><div id="content" data-github-owner="freechipsproject" data-github-repo="chisel3"><div class="content-wrapper"><section><h1 id="chisel--firrtl-diagramming-project">Chisel / FIRRTL Diagramming Project</h1>

<p>This project can generate GraphViz dot files and from those svg files representing Chisel generated Firrtl circuits.
It is also an example of a creating a Firrtl Transformation.  This transformation can be applied through the 
use of annotations as demonstrated in the examples.GCD test. The graphs are mostly clickable, clicking a module
will take you to a diagram for just that module. There is a TopLevel diagram that just shows the module hierarchy.
Also, an individual arrow can be hovered over to make it turn red and become easier to follow.</p>

<h2 id="example">Example</h2>

<h3 id="top-level-example">Top Level Example</h3>
<p><img src="https://raw.githubusercontent.com/freechipsproject/diagrammer/master/images/TopLevel.dot.svg?sanitize=true" alt="Graph" /></p>

<h3 id="module-example">Module Example</h3>

<p><img src="https://raw.githubusercontent.com/freechipsproject/diagrammer/master/images/TopOfVisualizer.dot.svg?sanitize=true" alt="Graph" /></p>

<h2 id="using">Using</h2>
<h3 id="install">Install</h3>
<p>Installing this software should be pretty much the following.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/freechipsproject/diagrammer
<span class="nb">cd </span>diagrammer
</code></pre></div></div>

<h3 id="dependencies">Dependencies</h3>
<p>You will need <a href="https://www.graphviz.org/">GraphViz</a> (specifically a default path to the program <code class="language-plaintext highlighter-rouge">dot</code>) and <code class="language-plaintext highlighter-rouge">sbt</code>.</p>

<p>Note that this project currently depends on the master branches of all components
of the Chisel ecosystem (chisel3 and firrtl), so you will need to <code class="language-plaintext highlighter-rouge">clone</code> and <code class="language-plaintext highlighter-rouge">sbt publishLocal</code> for each of these.</p>

<h3 id="creating-circuit-diagrams">Creating Circuit Diagrams.</h3>
<p>To create a set of graphs of a Firrtl Circuit all you need is this project and a Firrtl file (typically a file 
generated by Chisel with a <code class="language-plaintext highlighter-rouge">.fir</code> extension). Let’s say you have a Firrtl file <code class="language-plaintext highlighter-rouge">~/projects/output/circuit.fir</code>.
From the command line you while in this directory for this project, you run</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./diagram.sh <span class="nt">-i</span> ~/projects/output/circuit.fir
</code></pre></div></div>
<p>This will create a number of files in the same directory as the firrtl file that representing the firrtl graph.
Each file will be a diagram for each module
contained in the firrtl file, plus a file TopLevel.dot.svg file. It will also attempt to open the TopLevel.dot.svg file
in a browser using the command <code class="language-plaintext highlighter-rouge">open</code>. 
Each Module in the TopLevel diagram is clickable and should take you into the diagram for that specific module.
Because of the size of these files, the diagrams will include the internal logic of that module plus and IO only
presentation of any sub-modules found.</p>

<h2 id="options">Options</h2>
<ul>
  <li>-i, –firrtl-source set the source firrtl to work on</li>
  <li>-t, –targer-dir sets the output directory for the svg</li>
  <li>-s, –start-module sets the module name where the graphs will start being generated. The default is at the top</li>
  <li>-o, –open-program sets the open program, default is <code class="language-plaintext highlighter-rouge">open</code>, set to empty to tell it not to do open</li>
  <li>-j, –just-top-level generates just the top level diagram</li>
</ul>

<h2 id="how-diagrammer-works">How Diagrammer Works</h2>
<p>This program uses a number of firrtl transforms to create multiple graphviz dot file graph programs.
The dot files are translated into .svg files. See <a href="https://github.com/freechipsproject/chisel-bootcamp">GeneratorBootcamp Firrtl Chapters</a>
for a good introduction to writing Firrtl transforms</p>

<h2 id="todo">TODO</h2>
<ul>
  <li>This used to work by annotating a circuit, consider re-adding that</li>
  <li>Setting to allow the graphs to go deeper into sub-module logic</li>
  <li>Provide links to the chisel source</li>
</ul>

</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/verilog.min.js"></script><script src="/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash','verilog']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'freechipsproject/chisel3'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/js/search.js"></script><script src="/js/main.js"></script></body></html>